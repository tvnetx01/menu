<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daftar Menu</title>

<style>
  body {
    background:#000;
    margin:0;
    padding:10px;
    font-family: system-ui, sans-serif;
  }

  /* --- GRID CHANNEL --- */
  .channel-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 12px;
  }

  .channel {
    background:#fff;
    padding:10px;
    border-radius:10px;
    text-align:center;
    font-size:12px;
    box-shadow:0 2px 4px rgba(0,0,0,0.3);
    transition:transform 0.15s ease;
  }

  .channel:hover {
    transform:scale(1.05);
  }

  .channel img {
    width:100%;
    max-height:55px;
    object-fit:contain;
    margin-bottom:6px;
  }

  .channel a {
    text-decoration:none;
    color:#222;
    font-weight:600;
  }

  footer {
    margin-top:25px;
    text-align:center;
  }

  footer h3 {
    color:#fff;
    font-size:0.8rem;
    margin:0;
  }
</style>

</head>
<body>

<div class="channel-grid" id="channelGrid"></div>

<footer><h3>&copy; HATI HATI KEGOCEK IKLAN</h3></footer>

<script>
  const dataUrl = "script.js";

  function getGroupId() {
    const p = new URLSearchParams(location.search);
    return p.get("id") || "bsl1";
  }

  async function loadChannels() {
    const grid = document.getElementById("channelGrid");
    const selectedGroup = getGroupId();
    grid.innerHTML = `<p style="color:white;">Loading Bang: ${selectedGroup}</p>`;

    try {
      const res = await fetch(dataUrl + "?t=" + Date.now());
      const data = await res.json();
      const { channels, groups } = data;

      grid.innerHTML = "";
      const list = groups[selectedGroup];
      if (!list) {
        grid.innerHTML = `<p style="color:red;">Group "${selectedGroup}" Lagi Diperbaiki</p>`;
        return;
      }

      list.forEach(id => {
        const ch = channels[id];
        if (!ch) return;

        const el = document.createElement("div");
        el.className = "channel";
        el.innerHTML = `
          <a href="${ch.href}">
            <img src="${ch.img}" alt="${ch.name}">
            <div>${ch.name}</div>
          </a>
        `;
        grid.appendChild(el);
      });

    } catch (e) {
      grid.innerHTML = `<p style="color:red;">Eror: ${e.message}</p>`;
    }
  }

  loadChannels();
</script>

</body>
</html>
